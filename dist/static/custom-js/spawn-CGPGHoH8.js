import{j as e,r as x,c as T}from"./index-KynLtoi1.js";import{J as M,E as F}from"./JupyterHubHeader-DMFqVwqU.js";import{I as O,D as S,a as R}from"./DropDownButton-D1nzfXAw.js";import{W as U}from"./WarningMassage-Jy2bG8he.js";const v=({style:t,onClickFun:n=()=>{}})=>e.jsx("button",{className:`btn-${t.toLowerCase()}`,onClick:n,children:t}),z=({step:t,numSteps:n})=>e.jsxs("div",{className:"progress-tracker",children:[e.jsx("div",{className:"progress-line",children:e.jsx("div",{className:"progress-line-filled",style:{width:`${t/(n-1)*100}%`}})}),e.jsx("div",{className:"progress-circles",children:Array.from({length:n},(i,o)=>e.jsx("div",{className:`progress-circle ${t===o?"active":""} ${t>o?"completed":""}`,children:o+1},o))})]}),E=({currentStep:t,totalSteps:n,nextStep:i,prevStep:o,submitForm:l})=>e.jsxs("div",{className:"btns_wrap",children:[t===0&&e.jsx(v,{style:"Next",onClickFun:i}),t>0&&t<n-1&&e.jsxs(e.Fragment,{children:[e.jsx(v,{style:"Back",onClickFun:o}),e.jsx(v,{style:"Next",onClickFun:i})]}),t===n-1&&e.jsxs(e.Fragment,{children:[e.jsx(v,{style:"Back",onClickFun:o}),e.jsx(v,{style:"Submit",onClickFun:l})]})]}),H=({steps:t,submitForm:n,error:i})=>{const[o,l]=x.useState(0),m=()=>l(a=>a+1),r=()=>l(a=>a-1);return e.jsxs("div",{className:"form-wrapper",children:[e.jsx(z,{step:o,numSteps:t.length}),t.map((a,h)=>e.jsx("div",{style:{display:o===h?"block":"none"},children:a},h)),i!==""&&e.jsxs("p",{className:"error-message",children:[" ",i," "]}),e.jsx(E,{currentStep:o,totalSteps:t.length,nextStep:m,prevStep:r,submitForm:n})]})},I=({title:t="",infoText:n="",children:i})=>{const o=e.jsx(O,{infoText:n});return e.jsxs("div",{children:[e.jsxs("div",{className:"field-header",children:[t,n!==""&&o]}),e.jsx("div",{className:"field-children",children:i})]})},C=({title:t,onChange:n,children:i})=>{const[o,l]=x.useState(!1),m=r=>{l(r),n!==void 0&&n(r)};return e.jsxs("div",{children:[e.jsxs("div",{className:"checkbox-wrapper",children:[e.jsxs("label",{className:"switch",children:[e.jsx("input",{className:"switch-input",type:"checkbox",id:"eraseCheckbox",onChange:r=>m(r.target.checked)}),e.jsx("span",{className:"slider round"})]}),e.jsxs("label",{className:"switch-label",children:[" ",t," "]})]}),o&&i&&e.jsx("div",{className:"checkbox-children",children:i})]})},A=({menuOptions:t,title:n,formSelect:i,defaultOption:o})=>{const[l,m]=x.useState(!1),[r,a]=x.useState(o?o[1]:n),h=()=>{m(!l)},u=(g,j)=>{a(j),m(!1),i(g)};return x.useEffect(()=>{o&&i(o[0])},[]),e.jsxs("div",{className:"dropdownmenu",children:[e.jsx("div",{className:`select-header ${r!==n?"selected":""}`,onClick:h,children:r}),l&&e.jsx("div",{className:"select-options",children:Object.entries(t).map(([g,j])=>e.jsx("div",{className:"select-option",onClick:()=>u(g,j),children:j},g))})]})},D=({title:t,selectionText:n,numberOptions:i,setFormData:o})=>{const[l,m]=x.useState(i[0]),r=a=>{m(a),o(a)};return e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"field-title",children:[" ",t," "]}),e.jsx("div",{className:"field-container",children:e.jsxs("div",{className:"selection-container",children:[e.jsxs("p",{className:"selection-text",children:[" ",n," "]}),e.jsx("div",{className:"tiles-container",children:i.map(a=>e.jsx("div",{className:`tile memory-tile ${l===a?"active":""}`,onClick:()=>r(a),children:a},a))})]})})]})},V={"brno12-cerit":"brno12-cerit","brno11-elixir":"brno11-elixir","brno14-ceitec":"brno14-ceitec",brno2:"brno2",budejovice1:"budejovice1","du-cesnet":"du-cesnet","liberec3-tul":"liberec3-tul",plzen1:"plzen1","plzen4-ntis":"plzen4-ntis",praha1:"praha1","praha2-natur":"praha2-natur","praha5-elixir":"praha5-elixir","praha6-fzu":"praha6-fzu","pruhonice1-ibot":"pruhonice1-ibot","vestec1-elixir":"vestec1-elixir"},b={simple:{"minimalnb:26-09-2024":"Minimal NB","minimalnb:27-09-2024-ai":"Minimal NB with AI","minimalnb:26-09-2024-ssh":"Minimal NB with SSH access","minimalnb-cs:31-10-2024":"Minimal NB with Integrated VS Code","minimalnb-cs:17-11-2024-ai":"Minimal NB with Integrated VS Code and AI","datasciencenb:26-09-2024":"DataScience NB","datasciencenb:31-10-2024-ssh":"DataScience NB with SSH access"},r:{"jupyterhubronly:05-02-2024":"Python 3.11 and R 4.3.1 kernels","rstudio:11-08-2022-7":"RStudio with R 4.2.1","rstudio:4.2.1-rsat":"RStudio with R 4.2.1 and RSAT","rstudio:4.3.1":"RStudio with R 4.3.1","rstudio:4.4.0":"RStudio with R 4.4.0","rstudio:4.4.1":"RStudio with R 4.4.1","rstudio:4.4.1-ai":"RStudio with R 4.4.1 and AI"},tf:{"tensorflownb:31-08-2023":"TensorFlow 2.10 (CPU only)","tensorflowgpu:2.11.1":"TensorFlow 2.11.1 with GPU and TensorBoard","tensorflowgpu:2.12.1":"TensorFlow 2.12.1 with GPU and TensorBoard","tensorflowgpu:2.15.0":"TensorFlow 2.15.1 with GPU and TensorBoard","tensorflowgpu:2.17.0":"TensorFlow 2.17.0 with GPU and TensorBoard","pytorchgpu:2.4.1":"Pytorch 2.4.1","nvidia-pytorch:2.5.0":"NVIDIA Pytorch 2.5.0","nvidia-tensorflow:2.16.1":"NVIDIA Tensorflow 2.16.1"},matlab:{"matlab:r2022b":"MATLAB R2022b","matlab:r2023a":"MATLAB R2023a","matlab:r2024a":"MATLAB R2024a"},various:{"colab:2024-10-17":"Google Colab","alphapose:2023-10-26":"Alphapose","cuda-ubuntu:11.8-22.04":"CUDA 11.8","cuda-ubuntu:12.0-24.04":"CUDA 12.0","cuda-ubuntu:12.1-22.04":"CUDA 12.1","cuda-ubuntu:12.2-22.04":"CUDA 12.2","cuda-ubuntu:12.3-22.04":"CUDA 12.3","cuda-ubuntu:12.4-22.04":"CUDA 12.4"},folding:{"colabfold:1.5.5":"Colabfold 1.5.5","esmfold:2.0.0":"ESM Fold 2.0"}},$={simple:"Simple Jupyter Images",r:"R Images",tf:"TensorFlow Images",matlab:"Matlab Images",various:"Various Images",folding:"Folding Images"},q={simple:"simplenbname",r:"rnbname",tf:"tfnbname",matlab:"matlabnbname",various:"varnbname",folding:"foldnbname"},G={none:"None","mig-1g.10gb":"10GB part A100","mig-2g.20gb":"20GB part A100",a10:"whole A10",a40:"whole A40",a100:"whole A100","h100-80":"whole H100 (80GB)","h100-94":"whole H100 (94GB)",any:"any whole gpu"},W=({setFormData:t})=>{const[n,i]=x.useState(null),[o,l]=x.useState(null),[m,r]=x.useState(null),a=(s,f,p,y)=>{l(y),r(p),t(k=>({...k,images:s,[q[s]]:`cerit.io/hubs/${f}`}))},h=(s,f)=>{r(null),l(f),t(p=>({...p,images:"custom",customimage:s.target.value}))},u=s=>{t(f=>{const p={...f};return s?p.sshCheck="yes":delete p.sshCheck,p})},g=s=>n===s,j=s=>o===s;let w=0;function N(s){const f=/\/hub\/spawn\/[^/]+\/([^?]*)/,p=s.match(f);return p?p[1]:null}const c=N(appConfig.postUrl),d=c?`--${c}`:"";return e.jsxs("div",{className:"form-wrap",children:[e.jsx("h2",{children:"Choosing Image"}),Object.entries(b).map(([s,f],p)=>e.jsx(S,{isActive:g(p),onActivate:()=>i(p),isSelected:j(p),title:$[s],children:Object.entries(f).map(([y,k])=>{const P=w++;return e.jsx(R,{index:P,activeIndex:m,title:k,onSelect:()=>a(s,y,P,p)})})},p)),e.jsx(S,{isActive:g(Object.entries(b).length+1),isSelected:j(Object.entries(b).length+1),onActivate:()=>i(Object.entries(b).length+1),title:"Custom Image",infoText:"Provide image name in format repo/image_name:tag",children:e.jsx("input",{type:"text",onChange:s=>h(s,Object.entries(b).length+1),placeholder:"Write image name here",className:"custom-option"})},Object.entries(b).length+1),e.jsxs(C,{title:"Ensure ssh access into the notebook",onChange:u,children:["Connection will be available at jovyan@jupyter-",appConfig.userName,d,".dyn.cloud.e-infra.cz"]})]})},_=({setFormData:t,formData:n})=>{const[i,o]=x.useState(null),l=c=>{t(d=>({...d,home:c}))},m=c=>{t(d=>({...d,phname:c}))},r=c=>{t(d=>{const s={...d};return c?s.storageCheck="yes":delete s.storageCheck,s})},a=c=>{t(d=>{const s={...d};return c?s.projectCheck="yes":delete s.projectCheck,s})},h=c=>{t(d=>{const s={...d};return c?s.phCheck="yes":delete s.phCheck,s})},u=c=>{o(c),t(d=>({...d,phselection:"new"}))},g=c=>{o(c),t(d=>({...d,phselection:!1}))},j=c=>{t(d=>{const s={...d};return c?s.locationStorageCheck="yes":delete s.locationStorageCheck,s})},w={},N=document.getElementById("phid");if(N!==null){const c=N.getElementsByTagName("option");for(let d of c)w[d.value]=d.value}else w.testing="testing";return e.jsxs("div",{className:"form-wrap",children:[e.jsx("h2",{children:"Choosing storage"}),e.jsxs(I,{title:"Persistent Notebook Home",infoText:"Persistent home means that even when notebook is deleted, the data will persist and can be used again.",children:[e.jsxs(S,{isActive:i===0,onActivate:()=>u(0),primary:!1,title:"New",children:[e.jsx(C,{title:"Erase if home exists",onChange:h}),e.jsxs("div",{children:["Mounted to",e.jsx("code",{children:"/home/jovyan"})]})]},0),e.jsxs(S,{isActive:i===1,onActivate:()=>{g(1)},primary:!1,title:"Existing",children:[e.jsxs("div",{children:["Mounted to",e.jsx("code",{children:"/home/jovyan"})]}),e.jsx(A,{formSelect:m,title:"Select Persistent Home",menuOptions:w})]},1)]}),e.jsxs(I,{title:"MetaCentrum Storage",children:[e.jsxs(C,{title:"Mount MetaCentrum storage",onChange:r,children:[e.jsxs("p",{children:["Mounted to ",e.jsx("code",{children:"/home/meta/username "})," "]}),e.jsx(A,{formSelect:l,title:"Select MetaCentrum Storage",menuOptions:V}),e.jsx(C,{title:`Mount selected home to /storage/${n.home===void 0?"chosen_storage":n.home}/home/${appConfig.userName}`,onChange:j})]}),e.jsx(C,{onChange:a,title:"Mount project directories",children:e.jsx("p",{children:"All projects mounted to /home/projects/brno12, specific projects are subfolders of that path"})})]})]})},L=({formData:t,setFormData:n,prevStep:i,submitForm:o})=>{const l=a=>{n(h=>({...h,cpuselection:a}))},m=a=>{n(h=>({...h,memselection:a}))},r=a=>{n(h=>({...h,gpuselection:a}))};return e.jsxs("div",{className:"form-wrap",children:[e.jsx("h2",{children:"Resources"}),e.jsxs("p",{children:["The notebook is spawned only when one node fulfills ",e.jsx("b",{children:"all"})," your requirements."]}),e.jsx(D,{setFormData:l,title:"CPU",selectionText:"Select CPU limit:",numberOptions:[1,4,6,8,10,16,24,32]}),e.jsx(D,{setFormData:m,title:"Memory",selectionText:"Select memory limit (in GB):",numberOptions:[4,8,16,32,64,128,256]}),e.jsxs(I,{title:"GPU",infoText:"We strongly advise to request a GPU part instead of whole GPU due to their limited amount. If you use whole GPU inefficiently, you might be banned from requesting it again.",children:[e.jsx("p",{children:"By default, no GPU is assigned."}),e.jsx(A,{formSelect:r,title:"Select an option",menuOptions:G,defaultOption:Object.entries(G)[0]}),e.jsx("p",{children:"Current GPUs Free: "}),e.jsx("div",{children:e.jsxs("div",{className:"GPU-wrapper",children:[e.jsx("iframe",{className:"GPU-stats",src:"https://kuba-mon-int.cloud.e-infra.cz/d-solo/d3d6e47f-6365-428e-94d1-e04956349e08/gpu-types-and-usage?orgId=1&var-GPU=NVIDIA-A10&theme=light&panelId=2",width:"200",height:"200",frameborder:"0",align:"left"}),e.jsx("iframe",{className:"GPU-stats",src:"https://kuba-mon-int.cloud.e-infra.cz/d-solo/d3d6e47f-6365-428e-94d1-e04956349e08/gpu-types-and-usage?orgId=1&var-GPU=NVIDIA-A40&theme=light&panelId=2",width:"200",height:"200",frameborder:"0",align:"left"}),e.jsx("iframe",{className:"GPU-stats",src:"https://kuba-mon-int.cloud.e-infra.cz/d-solo/d3d6e47f-6365-428e-94d1-e04956349e08/gpu-types-and-usage?orgId=1&var-GPU=NVIDIA-A100-80GB-PCIe&theme=light&panelId=3",width:"200",height:"200",frameborder:"0",align:"left"}),e.jsx("iframe",{className:"GPU-stats",src:"https://kuba-mon-int.cloud.e-infra.cz/d-solo/d3d6e47f-6365-428e-94d1-e04956349e08/gpu-types-and-usage?orgId=1&var-GPU=NVIDIA-H100-NVL&theme=light&panelId=2",width:"200",height:"200",frameborder:"0",align:"left"}),e.jsx("iframe",{className:"GPU-stats",src:"https://kuba-mon-int.cloud.e-infra.cz/d-solo/d3d6e47f-6365-428e-94d1-e04956349e08/gpu-types-and-usage?orgId=1&var-GPU=NVIDIA-H100-PCIe&theme=light&panelId=2",width:"200",height:"200",frameborder:"0",align:"left"}),e.jsx("iframe",{className:"GPU-stats",src:"https://kuba-mon-int.cloud.e-infra.cz/d-solo/H5q_43FVk/jupyterhub?orgId=1&theme=light&panelId=50",width:"200",height:"200",frameborder:"0",align:"left"})]})})]}),e.jsx(I,{title:"Resource Usage",infoText:"This information is for your awareness, showing the estimated cost of running your notebooks, but no payment is required.",children:e.jsxs("div",{className:"GPU-wrapper",children:[e.jsx("iframe",{src:`https://kuba-mon-int.cloud.e-infra.cz/d-solo/dhl1ujXSz/jupyterhub-personal?orgId=1&from=now-90d&to=now&var-name=${appConfig.userName}&panelId=3&theme=light`,width:"300",height:"200",frameborder:"0"}),e.jsx("iframe",{src:`https://kuba-mon-int.cloud.e-infra.cz/d-solo/dhl1ujXSz/jupyterhub-personal?orgId=1&from=now-90d&to=now&var-name=${appConfig.userName}&panelId=4&theme=light`,width:"300",height:"200",frameborder:"0"})]})})]})};function J(){const[t,n]=x.useState(""),[i,o]=x.useState({memselection:4,cpuselection:1,gpuselection:"none",migamount:1}),l=()=>{const r={images:"Image",phselection:"Persistent Notebook Home"},a=Object.keys(r).filter(u=>i[u]===void 0).map(u=>r[u]);if(a.length>0){n(`Please select the following: ${a.join(", ")}`);return}n("");const h=new FormData;Object.entries(i).forEach(([u,g])=>{h.append(u,g)}),fetch(appConfig.postUrl,{method:"POST",body:h}).then(u=>{if(u.ok){const g=appConfig.postUrl.replace("/spawn/","/spawn-pending/");window.location.href=g}else console.error("Error submitting form:",u.statusText)}).catch(u=>{console.error("Network error:",u)})},m=[e.jsx(W,{formData:i,setFormData:o},0),e.jsx(_,{formData:i,setFormData:o},1),e.jsx(L,{formData:i,setFormData:o},2)];return e.jsxs(e.Fragment,{children:[e.jsx(U,{style:"new",children:e.jsxs("ul",{children:[e.jsxs("li",{children:["We added GPT support into the Minimal notebook, for more info see ",e.jsx("a",{href:"https://docs-ng.cerit.io/en/web-apps/jupyterhub#ai-gpt-support",children:"our documentation."})]}),e.jsxs("li",{children:["It is possible to connect to the running notebook via SSH, for more info see ",e.jsx("a",{href:"https://docs.cerit.io/en/web-apps/jupyterhub#notebook-ssh-access",children:"our documentation."})]}),e.jsxs("li",{children:["We integrated VS Code into Minimal notebook. Choose below ",e.jsx("b",{children:"Simple Jupyter images"})," and ",e.jsx("b",{children:"Minimal NB with Integrated VS Code"})," to try it. After startup, click on VS Code icon. It is possible to upload/download files using this option."]}),e.jsxs("li",{children:["Checkout resource utilisation (GPU, CPU, Memory) in ",e.jsx("a",{href:"https://grafana.hub.cloud.e-infra.cz/d/H5q_43FVk/jupyterhub",children:"grafana"}),". Click on ",e.jsx("b",{children:"Sign in with e-INFRA CZ"})," to log in."]})]})}),e.jsxs(U,{style:"warning",children:[e.jsx("h2",{children:" Scheduled maintenance and reboot on 16th - 18th Dec 2024 "}),e.jsx("p",{children:" We will have scheduled maintenance and cluster reboot between 16th and 17th of December 2024. All running notebooks will be interrupted and have to be started again. "})]}),e.jsx(M,{userName:appConfig.userName}),e.jsxs("div",{className:"wrapper",children:[e.jsx(H,{steps:m,submitForm:l,error:t}),e.jsx(F,{})]})]})}const B=T(document.getElementById("root"));console.log(B);B.render(e.jsx(J,{}));
